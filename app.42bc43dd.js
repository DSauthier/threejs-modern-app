!function(e){function t(t){for(var n,i,s=t[0],c=t[1],u=t[2],p=0,f=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(l&&l(t);f.length;)f.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={0:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([210,1]),r()}({192:function(e,t){},210:function(e,t,r){"use strict";r.r(t);r(70),r(133),r(55),r(81),r(82);var n=r(0),o=r(44),a=r.n(o),i=r(32),s=(r(58),r(87),r(89),r(91),r(29),r(96),r(142),r(97),r(98),r(99),r(31),r(42),r(101),r(66),r(147),r(120)),c=r.n(s),u=r(121),l=r.n(u),p=r(122),f=r.n(p),h=r(123),d=r.n(h),v=r(124),m=r.n(v),y=r(125),b=r(130),g=r(126),w=r(4),O=r.n(w);function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tmpVec0=new O.a.Vec3,this.tmpVec1=new O.a.Vec3,this.tmpVec2=new O.a.Vec3,this.tmpQuat0=new O.a.Vec3,this.scene=t,this.world=r,this._meshes=[],this._material=new n.S({color:65280,wireframe:!0}),this._sphereGeometry=new n.wb(1),this._boxGeometry=new n.d(1,1,1),this._planeGeometry=new n.eb(10,10,10,10),this._cylinderGeometry=new n.l(1,1,10,10)}var t,r,o;return t=e,(r=[{key:"update",value:function(){for(var e=this.world.bodies,t=this._meshes,r=this.tmpVec0,n=this.tmpQuat0,o=0,a=0;a!==e.length;a++)for(var i=e[a],s=0;s!==i.shapes.length;s++){var c=i.shapes[s];this._updateMesh(o,i,c);var u=t[o];u&&(i.quaternion.vmult(i.shapeOffsets[s],r),i.position.vadd(r,r),i.quaternion.mult(i.shapeOrientations[s],n),u.position.copy(r),u.quaternion.copy(n),"visible"in i&&(u.visible=i.visible)),o+=1}for(var l=o;l<t.length;l++){var p=t[l];p&&this.scene.remove(p)}t.length=o}},{key:"_updateMesh",value:function(e,t,r){var n=this._meshes[e];this._typeMatch(n,r)||(n&&this.scene.remove(n),n=this._meshes[e]=this._createMesh(r)),this._scaleMesh(n,r)}},{key:"_createMesh",value:function(e){var t,r=this._material,o=new n.u;switch(e.type){case O.a.Shape.types.SPHERE:t=new n.R(this._sphereGeometry,r);break;case O.a.Shape.types.BOX:t=new n.R(this._boxGeometry,r);break;case O.a.Shape.types.PLANE:t=new n.R(this._planeGeometry,r);break;case O.a.Shape.types.CONVEXPOLYHEDRON:for(var a=0;a<e.vertices.length;a++){var i=e.vertices[a];o.vertices.push(new n.Gb(i.x,i.y,i.z))}for(var s=0;s<e.faces.length;s++)for(var c=e.faces[s],u=c[0],l=1;l<c.length-1;l++){var p=c[l],f=c[l+1];o.faces.push(new n.q(u,p,f))}o.computeBoundingSphere(),o.computeFaceNormals(),t=new n.R(o,r),e.geometryId=o.id;break;case O.a.Shape.types.TRIMESH:for(var h=0;h<e.indices.length/3;h++){e.getTriangleVertices(h,this.tmpVec0,this.tmpVec1,this.tmpVec2),o.vertices.push(new n.Gb(this.tmpVec0.x,this.tmpVec0.y,this.tmpVec0.z),new n.Gb(this.tmpVec1.x,this.tmpVec1.y,this.tmpVec1.z),new n.Gb(this.tmpVec2.x,this.tmpVec2.y,this.tmpVec2.z));var d=o.vertices.length-3;o.faces.push(new n.q(d,d+1,d+2))}o.computeBoundingSphere(),o.computeFaceNormals(),t=new n.R(o,r),e.geometryId=o.id;break;case O.a.Shape.types.HEIGHTFIELD:for(var v=0;v<e.data.length-1;v++)for(var m=0;m<e.data[v].length-1;m++)for(var y=0;y<2;y++){e.getConvexTrianglePillar(v,m,0===y),this.tmpVec0.copy(e.pillarConvex.vertices[0]),this.tmpVec1.copy(e.pillarConvex.vertices[1]),this.tmpVec2.copy(e.pillarConvex.vertices[2]),this.tmpVec0.vadd(e.pillarOffset,this.tmpVec0),this.tmpVec1.vadd(e.pillarOffset,this.tmpVec1),this.tmpVec2.vadd(e.pillarOffset,this.tmpVec2),o.vertices.push(new n.Gb(this.tmpVec0.x,this.tmpVec0.y,this.tmpVec0.z),new n.Gb(this.tmpVec1.x,this.tmpVec1.y,this.tmpVec1.z),new n.Gb(this.tmpVec2.x,this.tmpVec2.y,this.tmpVec2.z));var b=o.vertices.length-3;o.faces.push(new n.q(b,b+1,b+2))}o.computeBoundingSphere(),o.computeFaceNormals(),t=new n.R(o,r),e.geometryId=o.id}return t&&this.scene.add(t),t}},{key:"_typeMatch",value:function(e,t){if(!e)return!1;var r=e.geometry;return r instanceof n.wb&&t instanceof O.a.Sphere||r instanceof n.d&&t instanceof O.a.Box||r instanceof n.eb&&t instanceof O.a.Plane||r.id===t.geometryId&&t instanceof O.a.ConvexPolyhedron||r.id===t.geometryId&&t instanceof O.a.Trimesh||r.id===t.geometryId&&t instanceof O.a.Heightfield}},{key:"_scaleMesh",value:function(e,t){var r=t.radius;switch(t.type){case O.a.Shape.types.SPHERE:e.scale.set(r,r,r);break;case O.a.Shape.types.BOX:e.scale.copy(t.halfExtents),e.scale.multiplyScalar(2);break;case O.a.Shape.types.CONVEXPOLYHEDRON:e.scale.set(1,1,1);break;case O.a.Shape.types.TRIMESH:e.scale.copy(t.scale);break;case O.a.Shape.types.HEIGHTFIELD:e.scale.set(1,1,1)}}}])&&x(t.prototype,r),o&&x(t,o),e}();function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){E(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var R=0;function V(e){return"__private_"+R+++"_"+e}var D=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.background,i=void 0===o?"#000":o,s=r.backgroundAlpha,u=void 0===s?1:s,p=r.fov,f=void 0===p?45:p,h=r.near,v=void 0===h?.01:h,w=r.far,O=void 0===w?100:w,x=S(r,["background","backgroundAlpha","fov","near","far"]);if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,M,{writable:!0,value:[]}),Object.defineProperty(this,T,{writable:!0,value:new n.Gb}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),this.resize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.width,n=void 0===r?t.width:r,o=e.height,a=void 0===o?t.height:o,i=e.pixelRatio,s=void 0===i?t.pixelRatio:i;return t.renderer.getPixelRatio()!==s&&t.renderer.setPixelRatio(s),t.renderer.setSize(n,a),t.camera.isPerspectiveCamera&&(t.camera.aspect=n/a),t.camera.updateProjectionMatrix(),t.composer&&t.composer.setSize(s*n,s*a),t.scene.traverse(function(e){"function"==typeof e.resize&&e.resize({width:n,height:a,pixelRatio:s})}),t.draw(),t},this.saveScreenshot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.width,n=void 0===r?2560:r,o=e.height,a=void 0===o?1440:o,i=e.fileName,s=void 0===i?"image.png":i;t.resize({width:n,height:a,pixelRatio:1}),t.draw();var c=t.canvas.toDataURL("image/png");t.resize(),t.draw(),U(s,c)},this.update=function(e,r){return t.orbitControls&&(t.orbitControls.update(),t.camera.up.fromArray(t.orbitControls.up),t.camera.position.fromArray(t.orbitControls.position),_(t,T)[T].fromArray(t.orbitControls.target),t.camera.lookAt(_(t,T)[T])),t.scene.traverse(function(t){"function"==typeof t.update&&t.update(e,r)}),t.world&&(t.world.step(e),t.cannonDebugRenderer&&t.cannonDebugRenderer.update(),t.world.bodies.forEach(function(t){"function"==typeof t.update&&t.update(e,r)})),_(t,M)[M].forEach(function(t){return t(e,r)}),t},this.draw=function(){return t.composer?(t.composer.passes.forEach(function(e,t,r){var n=t===r.length-1;e.renderToScreen=!!n}),t.composer.render()):t.renderer.render(t.scene,t.camera),t},this.start=function(){if(null===_(t,L)[L])return _(t,L)[L]=window.requestAnimationFrame(t.animate),t.isRunning=!0,t},this.stop=function(){if(null!==_(t,L)[L])return window.cancelAnimationFrame(_(t,L)[L]),_(t,L)[L]=null,t.isRunning=!1,t},this.animate=function(){if(t.isRunning){window.requestAnimationFrame(t.animate),t.stats&&t.stats.begin();var e=performance.now(),r=Math.min(t.maxDeltaTime,(e-_(t,G)[G])/1e3);t.time+=r,_(t,G)[G]=e,t.update(r,t.time),t.draw(),t.stats&&t.stats.end()}},this.traverse=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];t.scene.traverse(function(t){"function"==typeof t[e]&&t[e].apply(t,n)})},this.renderer=new n.Kb(k({antialias:!0,alpha:!1,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!0},x)),this.renderer.sortObjects=!1,this.canvas=this.renderer.domElement,this.renderer.setClearColor(i,u),_(this,A)[A]=x.width,_(this,z)[z]=x.height,this.maxPixelRatio=x.maxPixelRatio||2,this.maxDeltaTime=x.maxDeltaTime||1/30,this.camera=new n.cb(f,1,v,O),this.scene=new n.rb,this.gl=this.renderer.getContext(),this.time=0,this.isRunning=!1,_(this,G)[G]=performance.now(),_(this,L)[L]=null,window.addEventListener("resize",this.resize),window.addEventListener("orientationchange",this.resize),this.resize(),this.touchHandler=l()(this.canvas,{target:this.canvas,filtered:!0}),this.isDragging=!1,this.touchHandler.on("start",function(e,r){t.isDragging=!0,t.traverse("onPointerDown",e,r)}),this.touchHandler.on("move",function(e,r){return t.traverse("onPointerMove",e,r)}),this.touchHandler.on("end",function(e,r){t.isDragging=!1,t.traverse("onPointerUp",e,r)}),x.postprocessing&&(this.composer=new b.a(this.renderer),this.composer.addPass(new g.a(this.scene,this.camera))),x.orbitControls&&(this.orbitControls=c()(k({element:this.canvas,parent:window,distance:5},x.orbitControls instanceof Object?x.orbitControls:{})),this.camera.position.fromArray(this.orbitControls.position),this.camera.lookAt((new n.Gb).fromArray(this.orbitControls.target))),x.world&&(this.world=x.world,x.showWorldWireframes&&(this.cannonDebugRenderer=new j(this.scene,this.world))),x.showFps&&(this.stats=new d.a,this.stats.showPanel(0),document.body.appendChild(this.stats.dom)),x.controls){var P=a()(x.controls);if(this.controls=x.hideControls?P:m()(P,{expanded:!x.closeControls}),!x.hideControls){var E=document.createElement("style");E.type="text/css",E.innerHTML='\n          [class^="controlPanel-"] [class*="__field"]::before {\n            content: initial !important;\n          }\n          [class^="controlPanel-"] [class*="__field--button"] > button::before {\n            content: initial !important;\n          }\n        ',document.head.appendChild(E)}}var C=Object(y.getGPUTier)({glContext:this.renderer.getContext()});this.gpu={name:C.type,tier:Number(C.tier.slice(-1)),isMobile:C.tier.toLowerCase().includes("mobile")}}var t,r,o;return t=e,(r=[{key:"onUpdate",value:function(e){_(this,M)[M].push(e)}},{key:"width",get:function(){return _(this,A)[A]||window.innerWidth}},{key:"height",get:function(){return _(this,z)[z]||window.innerHeight}},{key:"pixelRatio",get:function(){return Math.min(this.maxPixelRatio,window.devicePixelRatio)}},{key:"cursor",get:function(){return this.canvas.style.cursor},set:function(e){this.canvas.style.cursor=e||null}}])&&C(t.prototype,r),o&&C(t,o),e}(),M=V("updateListeners"),T=V("tmpTarget"),L=V("rafID"),G=V("lastTime"),A=V("width"),z=V("height");function U(e,t){var r=f()(t),n=document.createElement("a");n.download=e,n.href=window.URL.createObjectURL(r),n.onclick=setTimeout(function(){window.URL.revokeObjectURL(r),n.removeAttribute("href")},0),n.click()}r(111),r(112),r(113),r(177),r(178),r(179),r(68),r(118),r(69);var I=r(127),q=r.n(I),H=r(46),F=r.n(H),B=r(45),N=r(128);r(194);function Y(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function $(e,t){return Q.apply(this,arguments)}function Q(){var e;return e=regeneratorRuntime.mark(function e(t,r){var o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new n.zb).name=t,o.encoding=r.encoding||n.H,X(t,o,r),e.prev=4,e.next=7,Object(B.a)(t,{crossorigin:"anonymous"});case 7:return a=e.sent,o.image=a,o.needsUpdate=!0,r.renderer&&r.renderer.initTexture(o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(4),new Error("Could not load texture ".concat(t));case 17:case"end":return e.stop()}},e,null,[[4,14]])}),(Q=function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){Y(a,n,o,i,s,"next",e)}function s(e){Y(a,n,o,i,s,"throw",e)}i(void 0)})}).apply(this,arguments)}function X(e,t,r){if("boolean"==typeof r.flipY&&(t.flipY=r.flipY),void 0!==r.mapping&&(t.mapping=r.mapping),void 0!==r.format)t.format=r.format;else{var o=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data:image\/jpeg/);t.format=o?n.nb:n.kb}r.repeat&&t.repeat.copy(r.repeat),t.wrapS=r.wrapS||n.g,t.wrapT=r.wrapT||n.g,t.minFilter=r.minFilter||n.J,t.magFilter=r.magFilter||n.I,t.generateMipmaps=!1!==r.generateMipmaps}r(196);var J=r(129),W=r.n(J),K=r(131);function Z(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ee(e,t){return te.apply(this,arguments)}function te(){var e;return e=regeneratorRuntime.mark(function e(t,r){var o,a,i,s,c,u,l,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.renderer){e.next=3;break}throw new Error("PBR Map requires renderer to passed in the options for ".concat(t,"!"));case 3:if(!r.equirectangular){e.next=14;break}return(a=new n.bb(o)).compileEquirectangularShader(),e.next=8,$(t,{renderer:o});case 8:return i=e.sent,s=a.fromEquirectangular(i),a.dispose(),i.dispose(),i.image.data=null,e.abrupt("return",s.texture);case 14:if(c=t,u=r.hdr,l=u?".hdr":".png",f="".concat(c.replace(/\/$/,""),"/"),h=l,p=["".concat(f,"px").concat(h),"".concat(f,"nx").concat(h),"".concat(f,"py").concat(h),"".concat(f,"ny").concat(h),"".concat(f,"pz").concat(h),"".concat(f,"nz").concat(h)],!u){e.next=20;break}return e.abrupt("return",new Promise(function(e,t){(new K.a).load(n.Eb,p,function(t){return e(re(t,r))},null,function(){return t(new Error("Could not load PBR map: ".concat(c)))})}));case 20:return e.abrupt("return",new Promise(function(e,t){(new n.k).load(p,function(t){t.encoding=n.ob,e(re(t,r))},null,function(){return t(new Error("Could not load PBR map: ".concat(c)))})}));case 21:case"end":return e.stop()}var f,h},e)}),(te=function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){Z(a,n,o,i,s,"next",e)}function s(e){Z(a,n,o,i,s,"throw",e)}i(void 0)})}).apply(this,arguments)}function re(e,t){if(t.pbr||"number"==typeof t.level){var r=new n.bb(e);if(r.compileCubemapShader(),t.pbr){e=r.fromCubemap(e).texture}else{var o=W()(Math.floor(t.level),0,r.cubeLods.length);e=r.cubeLods[o].texture}r.dispose()}return t.mapping&&(e.mapping=t.mapping),e}function ne(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function oe(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ae(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){oe(a,n,o,i,s,"next",e)}function s(e){oe(a,n,o,i,s,"throw",e)}i(void 0)})}}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach(function(t){ce(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var fe=0;function he(e){return"__private_"+fe+++"_"+e}var de=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,ve,{writable:!0,value:[]}),Object.defineProperty(this,me,{writable:!0,value:{}}),Object.defineProperty(this,ye,{writable:!0,value:[]}),Object.defineProperty(this,be,{writable:!0,value:10}),Object.defineProperty(this,ge,{writable:!0,value:[]}),this.get=function(e){if(!e)throw new TypeError("Must specify an URL for AssetManager.get()");if(!(e in pe(t,me)[me]))throw new Error("The asset ".concat(e," is not in the loaded files."));return pe(t,me)[me][e]}}var t,r,n,o,a,i;return t=e,(r=[{key:"addProgressListener",value:function(e){if("function"!=typeof e)throw new TypeError("onProgress must be a function");pe(this,ye)[ye].push(e)}},{key:"queue",value:function(e){var t=e.url,r=e.type,n=ue(e,["url","type"]);if(!t)throw new TypeError("Must specify a URL or opt.url for AssetManager.queue()");return this._getQueued(t)||pe(this,ve)[ve].push(se({url:t,type:r||this._extractType(t)},n)),t}},{key:"_getQueued",value:function(e){return pe(this,ve)[ve].find(function(t){return t.url===e})}},{key:"_extractType",value:function(e){var t=e.slice(e.lastIndexOf("."));switch(!0){case/\.(gltf|glb)$/i.test(t):return"gltf";case/\.json$/i.test(t):return"json";case/\.svg$/i.test(t):return"svg";case/\.(jpe?g|png|gif|bmp|tga|tif)$/i.test(t):return"image";case/\.(wav|mp3)$/i.test(t):return"audio";case/\.(mp4|webm|ogg|ogv)$/i.test(t):return"video";default:throw new Error("Could not load ".concat(e,", unknown file extension!"))}}},{key:"loadSingle",value:(i=ae(regeneratorRuntime.mark(function e(t){var r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.renderer,n=ue(t,["renderer"]),r){e.next=3;break}throw new Error("You must provide a renderer to the loadSingle function.");case 3:return e.prev=3,o=Date.now(),e.next=7,this._loadItem(se({renderer:r},n));case 7:return pe(this,me)[me][n.url]=e.sent,window.DEBUG&&console.log("\ud83d\udce6 Loaded single asset %c".concat(n.url,"%c in ").concat(F()(Date.now()-o)),"color:blue","color:black"),e.abrupt("return",n.url);case 12:e.prev=12,e.t0=e.catch(3),delete pe(this,me)[me][n.url],console.error("\ud83d\udce6  Could not load ".concat(n.url,":\n").concat(e.t0));case 16:case"end":return e.stop()}},e,this,[[3,12]])})),function(e){return i.apply(this,arguments)})},{key:"load",value:(a=ae(regeneratorRuntime.mark(function e(t){var r,n,o,a,i,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.renderer){e.next=3;break}throw new Error("You must provide a renderer to the load function.");case 3:if(n=pe(this,ve)[ve].slice(),pe(this,ve)[ve].length=0,0!==(o=n.length)){e.next=9;break}return setTimeout(function(){return pe(s,ye)[ye].forEach(function(e){return e(1)})},0),e.abrupt("return");case 9:return a=Date.now(),e.next=12,q()(n,function(){var e=ae(regeneratorRuntime.mark(function e(t,n){var a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Date.now(),e.next=4,s._loadItem(se({renderer:r},t));case 4:pe(s,me)[me][t.url]=e.sent,window.DEBUG&&s.log("Loaded %c".concat(t.url,"%c in ").concat(F()(Date.now()-a)),"color:blue","color:black"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s.logError("Skipping ".concat(t.url," from asset loading:\n").concat(e.t0));case 11:i=(n+1)/o,pe(s,ye)[ye].forEach(function(e){return e(i)});case 13:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,r){return e.apply(this,arguments)}}(),{concurrency:pe(this,be)[be]});case 12:window.DEBUG&&(i=pe(this,ge)[ge].filter(function(e){return"error"===e.type}),this.groupLog("\ud83d\udce6 Assets loaded in ".concat(F()(Date.now()-a)," \u23f1 ").concat(i.length>0?"%c \u26a0\ufe0f Skipped ".concat(i.length," asset").concat(i.length>1?"s":""," "):""),i.length>0?"color:white;background:red;":""));case 13:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"_loadItem",value:(o=ae(regeneratorRuntime.mark(function e(t){var r,n,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.url,n=t.type,o=t.renderer,a=ue(t,["url","type","renderer"]),!(r in pe(this,me)[me])){e.next=3;break}return e.abrupt("return",pe(this,me)[me][r]);case 3:e.t0=n,e.next="gltf"===e.t0?6:"json"===e.t0?7:"env-map"===e.t0?8:"svg"===e.t0?9:"image"===e.t0?9:"texture"===e.t0?10:"audio"===e.t0?11:"video"===e.t0?12:13;break;case 6:return e.abrupt("return",new Promise(function(e,t){(new N.a).load(r,e,null,function(e){return t(new Error("Could not load GLTF asset ".concat(r,":\n").concat(e)))})}));case 7:return e.abrupt("return",fetch(r).then(function(e){return e.json()}));case 8:return e.abrupt("return",ee(r,se({renderer:o},a)));case 9:return e.abrupt("return",Object(B.a)(r,{crossorigin:"anonymous"}));case 10:return e.abrupt("return",$(r,se({renderer:o},a)));case 11:return e.abrupt("return",fetch(r).then(function(e){return e.arrayBuffer()}));case 12:return e.abrupt("return",fetch(r).then(function(e){return e.blob()}));case 13:throw new Error("Could not load ".concat(r,", the type ").concat(n," is unknown!"));case 14:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];pe(this,ge)[ge].push({type:"log",text:t})}},{key:"logError",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];pe(this,ge)[ge].push({type:"error",text:t})}},{key:"groupLog",value:function(){var e;(e=console).groupCollapsed.apply(e,arguments),pe(this,ge)[ge].forEach(function(e){var t;(t=console)[e.type].apply(t,ne(e.text))}),console.groupEnd(),pe(this,ge)[ge].length=0}}])&&le(t.prototype,r),n&&le(t,n),e}(),ve=he("queue"),me=he("cache"),ye=he("onProgressListeners"),be=he("asyncConcurrency"),ge=he("logs"),we=new de;r(208),r(209);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=we.queue({url:"assets/suzanne.gltf",type:"gltf"}),Ce=we.queue({url:"assets/spotty-metal/albedo.jpg",type:"texture"}),_e=we.queue({url:"assets/spotty-metal/metalness.jpg",type:"texture"}),Re=we.queue({url:"assets/spotty-metal/roughness.jpg",type:"texture"}),Ve=we.queue({url:"assets/spotty-metal/normal.jpg",type:"texture"}),De=we.queue({url:"assets/ouside-afternoon-blurred-hdr.jpg",type:"env-map",equirectangular:!0}),Me=function(e){function t(e,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Pe(this,ke(t).call(this,r))).webgl=e,o.options=r;var a=we.get(Se).scene.clone(),i=new n.T({map:we.get(Ce),metalnessMap:we.get(_e),roughnessMap:we.get(Re),normalMap:we.get(Ve),normalScale:new n.Fb(2,2),envMap:we.get(De),roughness:.5,metalness:.8});return a.traverse(function(e){e.isMesh&&(e.material=i)}),a.scale.multiplyScalar(1.2),o.add(a),o.webgl.scene.background=we.get(De),o}var r,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,n["v"]),r=t,(o=[{key:"onPointerDown",value:function(e,t){var r=xe(t,2),o=r[0],a=r[1],i=(new n.Fb).set(o/this.webgl.width*2-1,-a/this.webgl.height*2+1),s=new n.pb;s.setFromCamera(i,this.webgl.camera);var c=s.intersectObject(this,!0);console.log(c.length>0?"Hit ".concat(c[0].object.name,"!"):"No hit")}},{key:"onPointerMove",value:function(e,t){var r=xe(t,2);r[0],r[1]}},{key:"onPointerUp",value:function(e,t){var r=xe(t,2);r[0],r[1]}},{key:"update",value:function(e,t){this.rotation.y+=e*this.webgl.controls.angularVelocity}}])&&je(r.prototype,o),a&&je(r,a),t}();window.DEBUG=window.location.search.includes("debug");var Te=new D({canvas:document.querySelector("#app"),alpha:!0,background:"#000",backgroundAlpha:1,postprocessing:!0,showFps:window.DEBUG,orbitControls:window.DEBUG&&{distance:5},controls:{angularVelocity:a.a.Slider(.1,{label:"Angular Velocity",min:.01,max:50,step:.01,mapping:function(e){return Math.pow(10,e)},inverseMapping:Math.log10})},hideControls:!window.DEBUG});window.DEBUG&&(window.webgl=Te),Te.canvas.style.visibility="hidden",we.load({renderer:Te.renderer}).then(function(){Te.canvas.style.visibility="",Te.camera.position.set(0,0,5),Te.scene.suzanne=new Me(Te),Te.scene.add(Te.scene.suzanne),function(e){var t=new n.x(16777215,16777215,.6);t.color.setHSL(.6,1,.6),t.groundColor.setHSL(.095,1,.75),t.position.set(0,50,0),e.scene.add(t);var r=new n.o(16777215,1);r.color.setHSL(.1,1,.95),r.position.set(3,5,1),r.position.multiplyScalar(50),e.scene.add(r)}(Te);var e,t,r=new i.a({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"#define GLSLIFY 1\nfloat vignette(vec2 uv, float radius, float smoothness) {\n\tfloat diff = radius - distance(uv, vec2(0.5, 0.5));\n\treturn smoothstep(-smoothness, smoothness, diff);\n}\n\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 texColor = texture2D(tDiffuse, vUv);\n\n  float vignetteValue = vignette(vUv, 0.5, 0.5);\n  texColor.rgb *= vignetteValue;\n\n  gl_FragColor = texColor;\n}\n",uniforms:{tDiffuse:{type:"t",value:new n.zb}}});Te.composer.addPass(r),window.DEBUG&&(e=Te,(t=document.createElement("div")).style.position="fixed",t.style.bottom=0,t.style.right=0,t.style.background="tomato",t.style.cursor="pointer",t.style.padding="8px 16px",t.style.color="white",t.style.fontSize="24px",t.textContent="Save screenshot",document.body.appendChild(t),t.addEventListener("click",e.saveScreenshot)),Te.start(),Te.draw()})}});
//# sourceMappingURL=app.42bc43dd.js.map